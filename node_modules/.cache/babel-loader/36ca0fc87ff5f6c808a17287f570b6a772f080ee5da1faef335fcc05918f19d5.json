{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kwell/Documents/GitHub/react-project-1/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Kwell/Documents/GitHub/react-project-1/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/Kwell/Documents/GitHub/react-project-1/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Kwell/Documents/GitHub/react-project-1/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{profileAPI,userAPI}from\"../api/api\";var ADD_POST='ADD-POST';var SET_USER_PROFILE=\"SET_USER_PROFILE\";var SET_STATUS=\"SET_STATUS\";var DELETE_POST=\"DELETE_POST\";var initialState={posts:[{id:1,massage:'Hi, how are you?',likeCount:0},{id:2,massage:'It\\'s my first post!',likeCount:24}],profile:null,status:''};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[{id:5,massage:action.newPostText,likeCount:0}]),newPostText:''});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case DELETE_POST:{return _objectSpread(_objectSpread({},state),{},{posts:state.posts.filter(function(p){return p.id!=action.PostId;})});}default:return state;}};export var addPostActionCreate=function addPostActionCreate(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUsersProfile=function setUsersProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var deletePost=function deletePost(PostId){return{type:DELETE_POST,PostId:PostId};};export var getUsersProfile=function getUsersProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return userAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUsersProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.updateStatus(status);case 2:response=_context2.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.getStatus(userId);case 2:response=_context3.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["profileAPI","userAPI","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","initialState","posts","id","massage","likeCount","profile","status","profileReducer","state","action","type","newPostText","filter","p","PostId","addPostActionCreate","setUsersProfile","setStatus","deletePost","getUsersProfile","userId","dispatch","getProfile","response","data","updateStatus","resultCode","getStatus"],"sources":["C:/Users/Kwell/Documents/GitHub/react-project-1/src/redux/profile-reducer.js"],"sourcesContent":["import {profileAPI, userAPI} from \"../api/api\";\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\nconst DELETE_POST = \"DELETE_POST\"\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: 1, massage: 'Hi, how are you?', likeCount: 0},\r\n        {id: 2, massage: 'It\\'s my first post!', likeCount: 24},\r\n    ],\r\n    profile: null,\r\n    status: ''\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, {id: 5, massage: action.newPostText, likeCount: 0,}],\r\n                newPostText: '',\r\n            };\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {...state, profile: action.profile}\r\n        }\r\n        case SET_STATUS: {\r\n            return {...state, status: action.status}\r\n        }\r\n        case DELETE_POST: {\r\n            return {...state, posts: state.posts.filter(p => p.id != action.PostId)}\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const addPostActionCreate = (newPostText) => ({type: ADD_POST, newPostText})\r\nexport const setUsersProfile = (profile) => ({type: SET_USER_PROFILE, profile})\r\nexport const setStatus = (status) => ({type: SET_STATUS, status})\r\nexport const deletePost = (PostId) => ({type: DELETE_POST, PostId})\r\n\r\nexport const getUsersProfile = (userId) => async (dispatch) => {\r\n    let response = await userAPI.getProfile(userId)\r\n    dispatch(setUsersProfile(response.data));\r\n}\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status));\r\n    }\r\n}\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n            dispatch(setStatus(response.data));\r\n}\r\n\r\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}